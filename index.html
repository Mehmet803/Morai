<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>M√òR‚Ä¢AI v3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #0b0f19;
      --bg2: #131a2a;
      --accent: #a855f7;
      --text-main: #e5e7eb;
      --text-soft: #94a3b8;
      --user-bubble: linear-gradient(135deg,#6366f1,#a855f7);
      --border: rgba(148,163,184,0.18);
    }
    body {
      background: radial-gradient(circle at top,var(--bg2),var(--bg));
      display:flex;justify-content:center;align-items:center;
      height:100vh;margin:0;
      font-family:system-ui,sans-serif;
      color:var(--text-main);
    }
    .app {
      width:100%;max-width:540px;height:100vh;
      display:flex;flex-direction:column;
      background:var(--bg2);
      border:1px solid var(--border);
      overflow:hidden;
    }
    .header {
      padding:12px 16px;
      background:#111827cc;
      border-bottom:1px solid var(--border);
      display:flex;justify-content:space-between;align-items:center;
    }
    .logo {font-weight:900;letter-spacing:.2rem;}
    .online {
      font-size:10px;padding:3px 10px;
      border-radius:999px;
      background:#22c55e33;color:#22c55e;
      border:1px solid #22c55e55;
    }
    .motto {
      padding:5px 14px;
      font-size:10px;color:var(--text-soft);
      background:#0f172acc;text-align:center;
      border-bottom:1px solid var(--border);
    }
    .chat {
      flex:1;overflow-y:auto;padding:14px;scroll-behavior:smooth;
    }
    .chat::-webkit-scrollbar {width:6px;}
    .chat::-webkit-scrollbar-thumb {
      background:#334155;border-radius:8px;
    }
    .msg-row {
      max-width:78%;margin-bottom:12px;
      animation:fadeIn .25s ease;
    }
    @keyframes fadeIn {
      from {opacity:0;transform:translateY(6px);}
    }
    .msg-row.user {align-self:flex-end;text-align:right;}
    .msg-row.bot {align-self:flex-start;}
    .bubble {
      background:#1f2937;
      padding:10px 12px;border-radius:14px;
      font-size:14px;line-height:1.35;
      white-space:pre-line;
    }
    .msg-row.user .bubble {
      background:var(--user-bubble);color:white;
      border-bottom-right-radius:4px;
    }
    .bubble img {
      max-width:240px;border-radius:12px;margin-bottom:6px;
    }
    .meta {
      font-size:10px;margin-top:3px;
      color:var(--text-soft);
    }
    .input-bar {
      padding:10px;border-top:1px solid var(--border);
      background:#111827dd;
      display:flex;gap:6px;
    }
    #file {display:none;}
    .icon {
      width:38px;border-radius:999px;
      border:1px solid #475569;
      background:#1f2937;color:white;
      display:flex;align-items:center;justify-content:center;
      cursor:pointer;font-size:16px;
    }
    #input {
      flex:1;background:#1e293b;
      border:1px solid #475569;
      border-radius:999px;
      padding:8px 12px;
      color:var(--text-main);outline:none;
    }
    #input:focus {
      border-color:var(--accent);
      box-shadow:0 0 0 2px #8b5cf633;
    }
    #send {
      width:45px;border-radius:999px;
      border:none;background:var(--accent);
      color:white;cursor:pointer;font-size:17px;
    }

    .typing {
      font-size:11px;
      color:var(--text-soft);
      margin:0 0 8px 8px;
      animation:fade .8s infinite alternate;
    }
    @keyframes fade {from{opacity:.4;}to{opacity:1;}}
  </style>
</head>

<body>
  <div class="app">
    <div class="header">
      <div class="logo">M√òR‚Ä¢AI</div>
      <div class="online">√ßevrimi√ßi</div>
    </div>

    <div class="motto">Ben M√òR‚Ä¢AI: Sallamadan konu≈üurum.</div>

    <div class="chat" id="chat"></div>

    <div class="input-bar">
      <label for="file" class="icon">üìé</label>
      <input type="file" id="file" accept="image/*" />
      <input id="input" type="text" placeholder="Bir ≈üey yaz reis‚Ä¶" />
      <button id="send">‚û°Ô∏è</button>
    </div>
  </div>

  <script>
    const chatEl=document.getElementById("chat");
    const inputEl=document.getElementById("input");
    const sendBtn=document.getElementById("send");
    const fileInput=document.getElementById("file");

    function now(){const d=new Date();
      return `${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}`;
    }

    function addMsg({text="",user=false,img=null}){
      const row=document.createElement("div");
      row.className="msg-row "+(user?"user":"bot");
      const bubble=document.createElement("div");
      bubble.className="bubble";
      if(img){const i=document.createElement("img");
        i.src=img;bubble.appendChild(i);}
      if(text) bubble.appendChild(document.createTextNode(text));
      const meta=document.createElement("div");
      meta.className="meta";meta.textContent=now();
      row.appendChild(bubble);row.appendChild(meta);
      chatEl.appendChild(row);chatEl.scrollTop=chatEl.scrollHeight;
    }

    function typing(on){
      if(on){
        if(!document.getElementById("typing")){
          const t=document.createElement("div");
          t.id="typing";t.className="typing";
          t.textContent="M√òR‚Ä¢AI yazƒ±yor‚Ä¶ ‚ö™‚ö™‚ö™";
          chatEl.appendChild(t);
          chatEl.scrollTop=chatEl.scrollHeight;
        }
      } else {
        const t=document.getElementById("typing");
        if(t)t.remove();
      }
    }

    function tone(t){
      t=t.toLowerCase();
      if(t.includes("reis"))return"street";
      if(t.includes("nedir")||t.includes("kimdir"))return"serious";
      if(t.includes("allah"))return"spiritual";
      return"normal";
    }

    function wrap(t,txt){
      if(t==="street")return"Reis, sana ≈ü√∂yle bir √∂zet buldum:\n\n"+txt;
      if(t==="serious")return"ƒ∞≈üte g√ºvenilir √∂zet:\n\n"+txt;
      if(t==="spiritual")return"Kƒ±saca b√∂yle anlatƒ±lƒ±yor:\n\n"+txt;
      return txt;
    }

    function picTopic(t){
      t=t.toLowerCase();
      if(t.includes("resim")||t.includes("foto")||t.includes("g√∂rsel")){
        return t.replace(/bana|resmi|resim|fotoƒüraf/g,"").trim()||"nature";
      }
      return null;
    }

    async function wiki(q){
      q=q.toLowerCase().replace(" nedir","");
      const url="https://tr.wikipedia.org/api/rest_v1/page/summary/"+encodeURIComponent(q);
      try{
        const r=await fetch(url);
        if(!r.ok)return null;
        const d=await r.json();
        return d.extract||null;
      }catch(e){return null;}
    }

    async function botAI(text){
      typing(true);
      await new Promise(r=>setTimeout(r,800));
      typing(false);

      const t=tone(text);

      const topic=picTopic(text);
      if(topic){
        const url="https://images.weserv.nl/?url=source.unsplash.com/600x400/?"+encodeURIComponent(topic);
        addMsg({text:`"${topic}" g√∂rseli üì∑`,img:url});
        return;
      }

      addMsg({text:"Bakƒ±yorum reis‚Ä¶"});
      const w=await wiki(text);
      if(w) addMsg({text:wrap(t,w)});
      else addMsg({text:"Buna kaynak bulamadƒ±m reis. Uydurmak istemiyorum."});
    }

    function send(){
      const v=inputEl.value.trim();
      if(!v)return;
      addMsg({text:v,user:true});
      inputEl.value="";
      botAI(v);
    }

    sendBtn.onclick=send;
    inputEl.onkeydown=e=>{if(e.key==="Enter")send();};

    fileInput.onchange=()=>{
      const f=fileInput.files[0];
      if(!f)return;
      const url=URL.createObjectURL(f);
      addMsg({img:url,user:true});
      botAI("bu fotoƒüraf"); 
      setTimeout(()=>URL.revokeObjectURL(url),5000);
    };

    addMsg({text:"Selam reis! Hazƒ±rƒ±m üíú"});
  </script>

</body>
</html>
