<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>M√òR‚Ä¢AI v2.5</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #0b0f19;
      --bg2: #131a2a;
      --accent: #a855f7;
      --user-bubble: linear-gradient(135deg, #6366f1, #a855f7);
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --border: rgba(148,163,184,0.2);
    }
    body {
      background: radial-gradient(circle at top, var(--bg2), var(--bg));
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
      font-family: system-ui, sans-serif;
      color: var(--text-main);
      overflow: hidden;
    }
    .app {
      width: 100%;
      max-width: 540px;
      height: 100vh;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 14px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .header {
      padding: 10px 16px;
      background: #111827cc;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      font-weight: 900;
      letter-spacing: 0.2rem;
    }
    .online {
      font-size: 10px;
      padding: 3px 10px;
      border-radius: 999px;
      background: #22c55e33;
      color: #22c55e;
      border: 1px solid #22c55e55;
    }

    .chat {
      flex: 1;
      overflow-y: auto;
      padding: 14px;
      scroll-behavior: smooth;
    }
    .chat::-webkit-scrollbar {
      width: 6px;
    }
    .chat::-webkit-scrollbar-thumb {
      background: #334155;
      border-radius: 10px;
    }

    .msg-row {
      max-width: 75%;
      margin-bottom: 12px;
      animation: fadeIn .3s ease;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(6px);}
      to {opacity: 1; transform: translateY(0);}
    }

    .msg-row.user {
      align-self: flex-end;
      text-align: right;
    }
    .msg-row.bot {
      align-self: flex-start;
    }

    .bubble {
      background: #1f2937;
      padding: 10px 12px;
      border-radius: 14px;
      font-size: 14px;
      white-space: pre-line;
      line-height: 1.35;
    }

    .msg-row.user .bubble {
      background: var(--user-bubble);
      color: #fff;
    }

    .bubble img {
      max-width: 240px;
      border-radius: 12px;
    }

    .meta {
      margin-top: 3px;
      font-size: 10px;
      color: var(--text-soft);
    }

    .input-bar {
      padding: 10px;
      border-top: 1px solid var(--border);
      background: #111827dd;
      display: flex;
      gap: 6px;
    }
    #input {
      flex: 1;
      background: #1e293b;
      border: 1px solid #475569;
      border-radius: 999px;
      padding: 8px 12px;
      color: var(--text-main);
      outline: none;
    }
    #input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px #8b5cf633;
    }
    #send {
      width: 45px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #fff;
      cursor: pointer;
      font-size: 17px;
    }
  </style>
</head>

<body>
  <div class="app">
    <div class="header">
      <div class="logo">M√òR‚Ä¢AI</div>
      <span class="online">√ßevrimi√ßi</span>
    </div>

    <div class="chat" id="chat">
      <div class="msg-row bot">
        <div class="bubble">
Ho≈ü geldin üíú
Ben M√òR‚Ä¢AI: tarayƒ±cƒ± i√ßinde √ßalƒ±≈üan yapay zekayƒ±m.
Wikipedia‚Äôdan bilgi getiririm. G√∂rsel de g√∂sterebilirim.

Bana ≈üunlar gibi yaz:
‚Ä¢ ‚ÄúBoz ayƒ± nedir?‚Äù
‚Ä¢ ‚ÄúBana kedi resmi g√∂nder‚Äù
‚Ä¢ ‚Äúƒ∞stanbul‚Äù
        </div>
        <div class="meta">≈üimdi</div>
      </div>
    </div>

    <div class="input-bar">
      <input type="text" id="input" placeholder="Bir ≈üey yaz..." />
      <button id="send">‚û°Ô∏è</button>
    </div>
  </div>

  <script>
    const chatEl = document.getElementById("chat");
    const inputEl = document.getElementById("input");
    const sendBtn = document.getElementById("send");

    function nowTime() {
      const d = new Date();
      return `${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}`;
    }

    function addMessage({text="", isUser=false, imageUrl=null}) {
      const row = document.createElement("div");
      row.className = "msg-row " + (isUser ? "user" : "bot");

      const bubble = document.createElement("div");
      bubble.className = "bubble";

      if (imageUrl) {
        const img = document.createElement("img");
        img.src = imageUrl;
        bubble.appendChild(img);
      }
      if (text) bubble.appendChild(document.createTextNode(text));

      const meta = document.createElement("div");
      meta.className = "meta";
      meta.textContent = nowTime();

      row.appendChild(bubble);
      row.appendChild(meta);
      chatEl.appendChild(row);
      chatEl.scrollTop = chatEl.scrollHeight;
    }

    function detectTone(text) {
      const t = text.toLowerCase();
      if (t.includes("reis") || t.includes("kanka")) return "street";
      if (t.includes("nedir") || t.includes("kimdir")) return "serious";
      if (t.includes("allah") || t.includes("hedef")) return "spiritual";
      return "balanced";
    }

    function searchImageTopic(text) {
      const t = text.toLowerCase();
      if (
        t.includes("resim") ||
        t.includes("foto") ||
        t.includes("g√∂rsel")
      ) {
        return t.replace("bana","").replace("resmi","").replace("resim","").trim() || "nature";
      }
      return null;
    }

    function wrapTone(tone, txt) {
      switch(tone){
        case "street":
          return "Reis, sana ≈ü√∂yle bir √∂zet buldum:\n\n" + txt;
        case "serious":
          return "ƒ∞≈üte g√ºvenilir bir √∂zet:\n\n" + txt;
        case "spiritual":
          return "Kaynaklarda b√∂yle anlatƒ±lƒ±yor:\n\n" + txt;
        default:
          return txt;
      }
    }

    async function fetchWiki(q) {
      const key = q.toLowerCase().replace(" nedir","").trim();
      const url = "https://tr.wikipedia.org/api/rest_v1/page/summary/" + encodeURIComponent(key);
      try {
        const r = await fetch(url);
        if(!r.ok) return null;
        const d = await r.json();
        return d.extract || null;
      } catch(e) {
        return null;
      }
    }

    async function handleMessage(text) {
      const tone = detectTone(text);

      // G√∂rsel isteƒüi
      const topic = searchImageTopic(text);
      if(topic){
        const imgUrl = "https://images.weserv.nl/?url=source.unsplash.com/600x400/?" + encodeURIComponent(topic);
        addMessage({text:`"${topic}" g√∂rseli üì∑`, imageUrl:imgUrl, isUser:false});
        return;
      }

      addMessage({text:"Bakƒ±yorum‚Ä¶", isUser:false});
      const info = await fetchWiki(text);

      if(info){
        addMessage({text: wrapTone(tone, info), isUser:false});
      } else {
        addMessage({text:"Bu konuda g√ºvenilir bir kaynak bulamadƒ±m.", isUser:false});
      }
    }

    function send(){
      const val = inputEl.value.trim();
      if(!val) return;
      addMessage({text:val, isUser:true});
      inputEl.value="";
      handleMessage(val);
    }

    sendBtn.addEventListener("click", send);
    inputEl.addEventListener("keydown", e=>{
      if(e.key==="Enter") send();
    });
  </script>
</body>
</html>
